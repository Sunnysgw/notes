# 微服务专题

项目启动的开端大部分都是单体架构，但是随着项目发展，会变的逐渐臃肿，对开发、部署、运维会带来问题

目前的主流架构是全面拥抱云原生的微服务架构，即根据业务将原来的模块做了拆分，分成多个模块，以实现业务逻辑之间的解耦

## 版本对应关系

https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E

因为各种原因，微服务架构把原来一个单体的模块拆成了多个小的模块，这样降低了代码之间的耦合性，方便服务的开发、扩容，但同时也带来了一些问题，包括服务多了，配置要怎么放，服务之间要怎么调用，分布式事务要怎么处理，而spring cloud就为了解决这些问题提供了一系列组件，比较常用的两套一个是网飞的，目前已经闭源了，一个是阿里的。

## nacos

nacos是为了解决服务之间调用、配置分发问题的组件，是阿里在维护。

对于注册中心，一般会有延迟注册的机制，保证服务的正常可用



nacos从2.0之后的版本服务端、客户端通信采用grpc的方式来做

服务发现有一个集群的概念，cluster-name，之后负载均衡的时候，基于这个来判断优先调用本集群

服务注册的核心功能是在 NamingService 这个接口中定义的

临时实例 持久实例的概念，现在临时实例的概念上升到服务的概念，即一个服务的实例要么全是持久的要么全是临时的

目前nacos实例注册是基于spring event listener的方式来做的

